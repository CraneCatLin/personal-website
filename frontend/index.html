<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
    <title>CraneCat喵 - 笔记库</title>
    <!-- Styles -->
    <link rel="stylesheet" href="/style.css">
    <!-- Markdown renderer & syntax highlighter -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it-imsize@2.0.1/dist/markdown-it-imsize.min.js"></script>
    <!-- Syntax highlight theme -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"></script>
    <!-- MarkdownIt for enhanced markdown -->
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markdown-it-katex@2.0.3/dist/markdown-it-katex.min.js"></script>
    <!-- Main logic -->
    <script src="/script.js" defer></script>
</head>

<body class="homepage">
    <!-- Grid layout: sidebar + content -->
    <div class="app-grid" id="appGrid">
        <!-- Sidebar: collapsible tree -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <span class="emoji-icon">笔记目录
                </div>
                <button class="collapse-btn" id="toggleSidebar" aria-label="Collapse sidebar"
                    title="Toggle sidebar">⏴⏵</button>
            </div>
            <!-- Tree renders here -->
            <nav class="tree-container" id="treeContainer">
                <div class="tree-placeholder">Loading...</div>
            </nav>
            <div class="sidebar-footer">tbc~</div>
        </aside>

        <!-- Main content: markdown/images/videos -->
        <main class="main-content" id="mainContent">
            <div class="viewer" id="viewer">
            </div>
            <div class="content-footer-decoration">*@#$</div>
        </main>
    </div>

    <!-- Fallback if JS fails -->
    <script>
        (function safeFallback() {
            if (!document.getElementById('viewer').innerHTML.trim()) {
                document.getElementById('viewer').innerHTML = `
                    <div class="markdown-body">
                        <h1>笔记库</h1>
                        <p>左侧目录树正在构建……若长时间无内容，请确认 <code>tree.json</code> 是否存在，以及网络状态。</p>
                        <details class="about-details" open>
                            <summary>关于本站 · 点击折叠/展开</summary>
                            <div class="about-content">
                                <p>邮箱：cranecat_rain@163.com</p>
                                <p>QQ：2019412832</p>
                                <p><em>此区域为静态后备，完全交互请等待脚本。</em></p>
                            </div>
                        </details>
                    </div>
                `;
            }
        })();
    </script>
</body>

</html>